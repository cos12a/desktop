import{d as Y,s as q,r as n,c as u,a as t,u as s,t as f,w as v,b as a,v as C,e as z,f as G,g as D,F as H,h as M,o as i,_ as J}from"./index-B27VgFVv.js";import{u as O}from"./bluetoothConnection-BJyjnzJ4.js";import{u as P,e as Q,d as X}from"./crypto-C2FAsCm-.js";const Z={class:"page"},h={class:"controls"},_=["disabled"],ee=["disabled"],le={key:0},te={key:1},ne={class:"controls"},se=["disabled"],oe=["disabled"],ue={key:0},ae={key:1},ie={class:"checkbox-group"},de={class:"controls"},re=["disabled"],ve={class:"checkbox-group"},pe={class:"log"},be="0000ffe1-0000-1000-8000-00805f9b34fb",T="YellowSubmarine_",fe=Y({__name:"Home",setup(ce){const c=O(),{isConnected:d,device:F,server:B,isSupported:I}=q(c);n("0000ffe1-0000-1000-8000-00805f9b34fb");const m=n("0000ffe2-0000-1000-8000-00805f9b34fb"),x=n(""),S=n(!1),U=n(!1),V=n(!1),$=n(!1),b=n([]),y=n(!1),w=P(B,be),k=n([]);async function L(o){if(!d.value)return;await w.subscribe(o,l=>R(o,l))?(console.log(`âœ… æˆåŠŸè®¢é˜… ${o}`),y.value=!0):console.warn(`âŒ è®¢é˜…å¤±è´¥ ${o}`)}function N(o){d.value&&(w.unsubscribe(o),y.value=!1)}n(null);const r=n("string");async function E(o){if(!B.value){b.value.push("âŒ æœªè¿žæŽ¥ï¼Œæ— æ³•å‘é€");return}let e=x.value;if(S.value&&(e+="\r"),U.value&&(e+=`
`),V.value){const l=Q(e,T);if(!l){b.value.push("âŒ åŠ å¯†å¤±è´¥");return}e=l}console.log("âž¡ï¸ å‘é€æ•°æ®:",e);try{await w.send(o,e),b.value.push(`âž¡ï¸ å·²å‘é€: ${e}`)}catch(l){b.value.push("âŒ å‘é€å¤±è´¥: "+(l?.message||l))}}function R(o,e){const l=Array.from(e).map(W=>W.toString(16).padStart(2,"0")).join("");let p="";try{p=new TextDecoder().decode(e)}catch{p="[è§£ç å¤±è´¥]"}let g="";r.value==="hex"?g=l:r.value==="decrypt"?g=X(l,T):g=p;const A=new Date().toLocaleTimeString();k.value.unshift({time:A,uuid:o,data:g}),k.value.length>20&&k.value.splice(20)}function K(){b.value=[]}function j(){k.value=[]}return(o,e)=>(i(),u("section",Z,[e[23]||(e[23]=t("h1",null,"Web è“ç‰™ Demo",-1)),t("div",h,[t("button",{onClick:e[0]||(e[0]=(...l)=>s(c).connect&&s(c).connect(...l)),disabled:!s(I)||s(d)},"è¿žæŽ¥",8,_),t("button",{onClick:e[1]||(e[1]=(...l)=>s(c).disconnect&&s(c).disconnect(...l)),disabled:!s(d)},"æ–­å¼€",8,ee),s(d)?(i(),u("span",le,"âœ… å·²è¿žæŽ¥: "+f(s(F)?.name||"æœªçŸ¥è®¾å¤‡"),1)):(i(),u("span",te,"âŒ æœªè¿žæŽ¥"))]),e[24]||(e[24]=t("h3",null,"è“ç‰™ç‰¹å¾è®¢é˜…æŽ§åˆ¶",-1)),t("div",ne,[t("strong",null,f(m.value),1),t("button",{onClick:e[2]||(e[2]=l=>L(m.value)),disabled:!s(d)||y.value},"è®¢é˜…Shell",8,se),t("button",{onClick:e[3]||(e[3]=l=>N(m.value)),disabled:!s(d)||!y.value},"å–æ¶ˆè®¢é˜…Shell",8,oe),y.value?(i(),u("span",ue,"ðŸ“¡ å·²è®¢é˜…")):(i(),u("span",ae,"æœªè®¢é˜…"))]),t("div",ie,[t("label",null,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>S.value=l)},null,512),[[C,S.value]]),e[14]||(e[14]=a(" æ•°æ®å¢žåŠ  \\r",-1))]),t("label",null,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>U.value=l)},null,512),[[C,U.value]]),e[15]||(e[15]=a(" æ•°æ®å¢žåŠ  \\n",-1))]),t("label",null,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=l=>V.value=l)},null,512),[[C,V.value]]),e[16]||(e[16]=a(" åŠ å¯†å‘é€",-1))]),t("label",null,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=l=>$.value=l)},null,512),[[C,$.value]]),e[17]||(e[17]=a(" Hex æ ¼å¼å‘é€",-1))])]),t("div",de,[v(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>x.value=l),placeholder:"è¾“å…¥è¦å‘é€çš„æ•°æ®",onKeyup:e[9]||(e[9]=G(l=>E(m.value),["enter"]))},null,544),[[z,x.value]]),t("button",{onClick:e[10]||(e[10]=l=>E(m.value)),disabled:!s(d)||!x.value},"å‘é€",8,re)]),t("div",ve,[t("label",null,[v(t("input",{type:"radio",value:"string","onUpdate:modelValue":e[11]||(e[11]=l=>r.value=l)},null,512),[[D,r.value]]),e[18]||(e[18]=a(" å­—ç¬¦ä¸²æ˜¾ç¤º",-1))]),t("label",null,[v(t("input",{type:"radio",value:"hex","onUpdate:modelValue":e[12]||(e[12]=l=>r.value=l)},null,512),[[D,r.value]]),e[19]||(e[19]=a(" Hex æ˜¾ç¤º",-1))]),t("label",null,[v(t("input",{type:"radio",value:"decrypt","onUpdate:modelValue":e[13]||(e[13]=l=>r.value=l)},null,512),[[D,r.value]]),e[20]||(e[20]=a(" è§£å¯†æ˜¾ç¤º",-1))])]),t("h3",null,[e[21]||(e[21]=a("æŽ¥æ”¶æ•°æ® ",-1)),t("button",{onClick:j},"æ¸…é™¤")]),(i(!0),u(H,null,M(k.value,(l,p)=>(i(),u("div",{key:p},[t("pre",null,f(l.time)+" | "+f(l.uuid)+" | "+f(l.data),1)]))),128)),t("div",pe,[t("h3",null,[e[22]||(e[22]=a("æ—¥å¿— ",-1)),t("button",{onClick:K},"æ¸…é™¤")]),(i(!0),u(H,null,M(b.value,(l,p)=>(i(),u("div",{key:p},f(l),1))),128))])]))}}),xe=J(fe,[["__scopeId","data-v-8b87c302"]]);export{xe as default};
