import{d as ie,r as v,l as se,m as oe,c as p,a as e,b as E,w as A,n as q,F as J,h as j,u as w,e as G,t as B,o as c,_ as ue,p as Ce,s as ce,q as Ae,j as le,T as Se,x as De,y as Be,i as L,z as Te,A as we,B as he,g as ee}from"./index-B27VgFVv.js";import{u as fe,r as pe}from"./bluetoothConnection-BJyjnzJ4.js";import{d as ne,u as ve,t as xe,e as Ie}from"./crypto-C2FAsCm-.js";const R=7,me=2,ae=11;function be(g){return g+R+me}function ge(g,U){let u=0;for(let s=1;s<U+R;s++)u+=g[s];return 256-(u&127)&255}function Ee(g){const{dst:U,src:u,msg_id:s,msg_cat:S,data:y}=g,m=y.length;if(m<1||m>ae)throw new Error(`Invalid payload length: ${m} (must be 1..${ae})`);const r=be(m),d=new Uint8Array(r);d[0]=0,d[1]=U&255,d[2]=u&255,d[3]=s&255,d[4]=s>>8&255,d[5]=S&255,d[6]=m&255,d.set(y,R);const h=ge(d,m);return d[R+m]=h,d[R+m+1]=255,d}function _e(g){const U=g.length;if(U<R+me+1||g[0]!==0)return!1;const u=g[6];if(u<1||u>ae||U!==be(u))return!1;const s=R+u,S=s+1;if(g[S]!==255)return!1;const y=ge(g,u),m=g[s];return y===m}function Ne(g,U,u,s,S){return Ee({dst:g,src:U,msg_id:u,msg_cat:s,data:S})}function Ue(g){return Array.from(g).map(U=>"0x"+U.toString(16).padStart(2,"0")).join(" ")}const Oe={class:"smaps-builder"},ke={class:"form"},Me=["value"],Pe=["value"],We=["value"],Fe={class:"hint"},te=11,$e=ie({__name:"SmapsBuilder",emits:["generated"],setup(g,{emit:U}){const u=[{label:"ANY (0x00)",value:0},{label:"WATER_SYSTEM (0x01)",value:1},{label:"HOOD (0x02)",value:2},{label:"WSYS_DISPLAY (0x03)",value:3},{label:"COOKER (0x04)",value:4},{label:"HOOD_DISPLAY (0x05)",value:5},{label:"APP_EXT (0x06)",value:6},{label:"APP_INT (0x07)",value:7},{label:"CLOUD (0x08)",value:8},{label:"TESTER_APP (0x09)",value:9},{label:"INSTALLER_APP (0x0a)",value:10},{label:"HUB (0x0b)",value:11},{label:"VR_TIANA_APP (0x0c)",value:12},{label:"ALEXA (0x0e)",value:14}],s=u,S=[{label:"UNITO_MSGCAT_GET (0x01)",value:1},{label:"UNITO_MSGCAT_SET (0x02)",value:2},{label:"UNITO_MSGCAT_CLEAR (0x03)",value:3},{label:"UNITO_MSGCAT_RESPONSE (0x04)",value:4},{label:"UNITO_MSGCAT_REPORT (0x05)",value:5},{label:"UNITO_FW_INITIATED_MSG (0x06)",value:6},{label:"UNITO_FW_INITIATED_EVT (0x07)",value:7}],y=v(1),m=v(6),r=v("FEEF"),d=v(2),h=v("01"),_=v(new Uint8Array),x=v(!1),N=new Uint8Array([1]),D=se(()=>{try{return F(h.value).length}catch{return 0}});se(()=>_.value.length?Ue(_.value):"");function F(O){const n=O.trim().split(/\s+/).filter(Boolean);if(n.length===0)return N;const i=n.map(C=>{const $=parseInt(C,16);if(isNaN($)||$<0||$>255)throw new Error(`éžæ³• HEX å­—èŠ‚: ${C}`);return $});return i.length>te?(console.warn(`data é•¿åº¦ ${i.length} è¶…è¿‡æœ€å¤§ ${te}ï¼Œå·²æˆªæ–­`),new Uint8Array(i.slice(0,te))):i.length===0?N:new Uint8Array(i)}function Y(){try{const O=F(h.value),n=r.value.trim().replace(/^0x/i,""),i=n.length?parseInt(n,16):0;if(isNaN(i)||i<0||i>65535)throw new Error("msg_id éžæ³•ï¼ˆéœ€ä¸º 16 ä½ä»¥å†… HEXï¼‰");_.value=Ne(y.value,m.value,i,d.value,O),x.value=_e(_.value)}catch{_.value=new Uint8Array,x.value=!1}}const H=U;return oe([y,m,r,d,h],()=>{Y()},{immediate:!0}),oe([_,x],([O,n])=>{n&&O.length&&H("generated",O)},{immediate:!0}),(O,n)=>(c(),p("div",Oe,[n[11]||(n[11]=e("h3",null,"ðŸ“¦ SMAPS æ¶ˆæ¯æž„é€ å™¨",-1)),e("div",ke,[e("label",null,[n[5]||(n[5]=E("ç›®æ ‡åœ°å€ dst: ",-1)),A(e("select",{"onUpdate:modelValue":n[0]||(n[0]=i=>y.value=i)},[(c(),p(J,null,j(u,i=>e("option",{key:i.value,value:i.value},B(i.label),9,Me)),64))],512),[[q,y.value,void 0,{number:!0}]])]),e("label",null,[n[6]||(n[6]=E("æºåœ°å€ src: ",-1)),A(e("select",{"onUpdate:modelValue":n[1]||(n[1]=i=>m.value=i)},[(c(!0),p(J,null,j(w(s),i=>(c(),p("option",{key:i.value,value:i.value},B(i.label),9,Pe))),128))],512),[[q,m.value,void 0,{number:!0}]])]),e("label",null,[n[7]||(n[7]=E("æ¶ˆæ¯ ID msg_id (HEX): ",-1)),A(e("input",{"onUpdate:modelValue":n[2]||(n[2]=i=>r.value=i),placeholder:"e.g. FEEF"},null,512),[[G,r.value]])]),e("label",null,[n[8]||(n[8]=E("æ¶ˆæ¯ç±»åˆ« msg_cat: ",-1)),A(e("select",{"onUpdate:modelValue":n[3]||(n[3]=i=>d.value=i)},[(c(),p(J,null,j(S,i=>e("option",{key:i.value,value:i.value},B(i.label),9,We)),64))],512),[[q,d.value,void 0,{number:!0}]])]),e("label",null,[n[9]||(n[9]=E("æ•°æ®å†…å®¹ data (HEX): ",-1)),A(e("input",{"onUpdate:modelValue":n[4]||(n[4]=i=>h.value=i),placeholder:"01 02 03"},null,512),[[G,h.value]])]),e("p",Fe,[n[10]||(n[10]=E(" æ•°æ®é•¿åº¦ data_len: ",-1)),e("strong",null,B(D.value),1)])])]))}}),Ve=ue($e,[["__scopeId","data-v-1f6f4cd5"]]),Le={class:"modal-content"},qe={class:"modal-body"},He={class:"json-editor"},Re={class:"form-group"},Ge={class:"form-group"},Je={key:0,class:"password-input-container"},je=["type"],Ye=["title"],Xe={class:"form-group"},Ze={class:"form-group"},ze={class:"form-group"},Qe={style:{"max-height":"200px","overflow-y":"auto",background:"#f9f9f9",padding:"10px",border:"1px solid #ddd"}},Ke="YellowSubmarine_",et=ie({__name:"WifiConfigNetwork",props:{visible:{type:Boolean}},emits:["update","confirmed","closed"],setup(g,{emit:U}){const u=U,s=Ce({WifiSsid:"mqtt",To:"Hub",InstallationCountry:"",Action:"ProvData",BaseUrl:"https://iot-web.unito-oauth.com",WaterSystemExisting:"Yes",TimeZone:"+8",UserAppType:"ios",WifiPassword:"11221122",From:"App",UserAppDeviceUuid:"175DA3CC-F2B5-4CD0-A65E-A3B58BF0DB01",MqttBaseUrl:"mqtts://iot.unito-oauth.com:8883"}),S=v(""),y=v(""),m=v(""),r=v(""),d=v(""),h=k=>{const t=k.target;t.value!=="custom"&&(s.BaseUrl=t.value,t.value.includes("test")?s.MqttBaseUrl="mqtts://iot-test.unito-oauth.com:8883":s.MqttBaseUrl="mqtts://iot.unito-oauth.com:8883")},_=()=>{y.value&&(s.BaseUrl=y.value,y.value.includes("test")?s.MqttBaseUrl="mqtts://iot-test.unito-oauth.com:8883":s.MqttBaseUrl="mqtts://iot.unito-oauth.com:8883")},x=v(!1),N=()=>{x.value=!x.value},D=(k,t)=>{const l=t.target;l.value!=="custom"&&(s[k]=l.value)},F=()=>{s.WifiSsid==="custom"&&(s.WifiSsid=S.value),s.BaseUrl==="custom"&&(s.BaseUrl=y.value),s.MqttBaseUrl==="custom"&&(s.MqttBaseUrl=m.value),s.WifiPassword==="custom"&&(s.WifiPassword=r.value),s.UserAppDeviceUuid==="custom"&&(s.UserAppDeviceUuid=d.value),console.log(S.value,y.value,m.value,r.value,d.value),console.log("ç”Ÿæˆçš„é…ç½®æ•°æ®:",s);const k={...s},t=JSON.stringify(k,null,2);u("confirmed",t)},Y=()=>{Object.assign(s,{WifiSsid:"mqtt",BaseUrl:"https://iot-web.unito-oauth.com",MqttBaseUrl:"mqtts://iot.unito-oauth.com:8883",WifiPassword:"11221122",UserAppDeviceUuid:"175DA3CC-F2B5-4CD0-A65E-A3B58BF0DB01"}),S.value="",y.value="",m.value="",r.value="",d.value=""},H=()=>{u("update",!1),u("closed")},O=fe(),{device:n,server:i}=ce(O),C=v([]);async function $(){const k="0000ffe1-0000-1000-8000-00805f9b34fb",t="00002a3d-0000-1000-8000-00805f9b34fb";try{const l=await pe(i.value,t,k);if(!l||l.length===0){C.value.unshift("âŒ è¯»å–åˆ°çš„é…ç½‘æ•°æ®ä¸ºç©º"),console.error("è¯»å–åˆ°çš„é…ç½‘æ•°æ®ä¸ºç©º");return}const M=Array.from(l).map(P=>P.toString(16).padStart(2,"0")).join("");C.value.unshift("raw hex: "+M),console.log("raw hex: ",M);const W=ne(M,Ke);if(!W){C.value.unshift("âš ï¸ è§£å¯†ä¸ºç©º");return}console.log("è§£å¯†åŽæ–‡æœ¬: ",W);try{const P=await K(W);console.log("å‘é€åˆ°æœåŠ¡å™¨ï¼Œè¿”å›ž: ",P),C.value.unshift("âœ… è§£å¯†å¹¶è§£æžä¸º JSON æˆåŠŸ: "+JSON.stringify(P)),P.msg==="success"?C.value.unshift("ðŸŽ‰ è®¾å¤‡ç»‘å®šæˆåŠŸï¼"):C.value.unshift("âŒ è®¾å¤‡ç»‘å®šå¤±è´¥: "+(P.detail||"æœªçŸ¥é”™è¯¯"))}catch{C.value.unshift("âš ï¸ è§£å¯†æˆåŠŸä½†è§£æžä¸º JSON å¤±è´¥ï¼Œæ˜¾ç¤º raw"),console.warn("è§£å¯†æˆåŠŸä½†è§£æžä¸º JSON å¤±è´¥ï¼Œæ˜¾ç¤º raw")}}catch(l){C.value.unshift("âŒ è¯»å–é…ç½‘æ•°æ®å¤±è´¥: "+(l?.message||l))}}async function K(k){const t="3.8.04292024",l="WsInf_51",M="175DA3CC-F2B5-4CD0-A65E-A3B58BF0DB04",P="Asia/Shanghai";try{const V=JSON.parse(k);console.log("Parsed JSON for registration:",V);const z={AppVersion:t,WsProductName:l,HubToken:V.HubToken,UserAppDeviceUUID:M,UserAppType:"ios",TimeZoneId:P,TimeZone:"+8"};return console.log("å‘é€æ³¨å†Œè¯·æ±‚ï¼Œæ•°æ®:",z),await(await fetch("https://red.yzluo.top/unito/water-sys/app/homeRegister",{method:"POST",headers:{"Content-Type":"application/json",Authorization:V.HubSn},body:JSON.stringify(z)})).json()}catch(V){return console.error("å‘é€æ³¨å†Œè¯·æ±‚å¤±è´¥:",V),{msg:"error",detail:V?.message||"æœªçŸ¥é”™è¯¯"}}}return(k,t)=>(c(),Ae(Be,{to:"body"},[le(Se,{name:"modal-fade"},{default:De(()=>[g.visible?(c(),p("div",{key:0,class:"modal-overlay",onClick:Te(H,["self"])},[e("div",Le,[e("div",{class:"modal-header"},[t[14]||(t[14]=e("h3",null,"WIFIé…ç½‘é¡µé¢",-1)),e("button",{class:"close-btn",onClick:H})]),e("div",qe,[e("div",He,[e("div",Re,[t[16]||(t[16]=e("label",null,"Wifi SSID:",-1)),A(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.WifiSsid=l),onChange:t[1]||(t[1]=l=>D("WifiSsid",l))},[...t[15]||(t[15]=[e("option",{value:"mqtt"},"mqtt",-1),e("option",{value:"Unito-Tech-Private"},"Unito-Tech-Private",-1),e("option",{value:"custom"},"è‡ªå®šä¹‰",-1)])],544),[[q,s.WifiSsid]]),s.WifiSsid==="custom"?A((c(),p("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=l=>S.value=l),placeholder:"è¾“å…¥è‡ªå®šä¹‰Wifi SSID",class:"custom-input"},null,512)),[[G,S.value]]):L("",!0)]),e("div",Ge,[t[18]||(t[18]=e("label",null,"Wifiå¯†ç :",-1)),A(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.WifiPassword=l),onChange:t[4]||(t[4]=l=>D("WifiPassword",l))},[...t[17]||(t[17]=[e("option",{value:"11221122"},"11221122",-1),e("option",{value:"UNITO1234!@#"},"UNITO1234!@#",-1),e("option",{value:"custom"},"è‡ªå®šä¹‰",-1)])],544),[[q,s.WifiPassword]]),s.WifiPassword==="custom"?(c(),p("div",Je,[A(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>r.value=l),placeholder:"è¾“å…¥è‡ªå®šä¹‰å¯†ç ",type:x.value?"text":"password",class:"custom-input password-input"},null,8,je),[[we,r.value]]),e("button",{type:"button",onClick:N,class:"password-toggle-btn",title:x.value?"éšè—å¯†ç ":"æ˜¾ç¤ºå¯†ç "},B(x.value?"ðŸ™ˆ":"ðŸ‘ï¸"),9,Ye)])):L("",!0)]),e("div",Xe,[t[20]||(t[20]=e("label",null,"Base URL:",-1)),A(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.BaseUrl=l),onChange:h},[...t[19]||(t[19]=[e("option",{value:"https://iot-web.unito-oauth.com"},"æ­£å¼æœåŠ¡å™¨ (iot-web)",-1),e("option",{value:"https://iot-test.unito-oauth.com"},"æµ‹è¯•æœåŠ¡å™¨ (iot-test)",-1),e("option",{value:"custom"},"è‡ªå®šä¹‰",-1)])],544),[[q,s.BaseUrl]]),s.BaseUrl==="custom"?A((c(),p("input",{key:0,"onUpdate:modelValue":t[7]||(t[7]=l=>y.value=l),placeholder:"è¾“å…¥è‡ªå®šä¹‰Base URL",onBlur:_,class:"custom-input"},null,544)),[[G,y.value]]):L("",!0)]),e("div",Ze,[t[22]||(t[22]=e("label",null,"MQTT Base URL:",-1)),A(e("select",{"onUpdate:modelValue":t[8]||(t[8]=l=>s.MqttBaseUrl=l),onChange:t[9]||(t[9]=l=>D("MqttBaseUrl",l))},[...t[21]||(t[21]=[e("option",{value:"mqtts://iot.unito-oauth.com:8883"},"æ­£å¼MQTT (iot)",-1),e("option",{value:"mqtts://iot-test.unito-oauth.com:8883"},"æµ‹è¯•MQTT (iot-test)",-1),e("option",{value:"custom"},"è‡ªå®šä¹‰",-1)])],544),[[q,s.MqttBaseUrl]]),s.MqttBaseUrl==="custom"?A((c(),p("input",{key:0,"onUpdate:modelValue":t[10]||(t[10]=l=>m.value=l),placeholder:"è¾“å…¥è‡ªå®šä¹‰MQTT URL",class:"custom-input"},null,512)),[[G,m.value]]):L("",!0)]),e("div",ze,[t[24]||(t[24]=e("label",null,"ç”¨æˆ·è®¾å¤‡UUID:",-1)),A(e("select",{"onUpdate:modelValue":t[11]||(t[11]=l=>s.UserAppDeviceUuid=l),onChange:t[12]||(t[12]=l=>D("UserAppDeviceUuid",l))},[...t[23]||(t[23]=[e("option",{value:"175DA3CC-F2B5-4CD0-A65E-A3B58BF0DB01"},"175DA3CC-...-DB01",-1),e("option",{value:"175DA3CC-F2B5-4CD0-A65E-A3B58BF0DB02"},"175DA3CC-...-DB02",-1),e("option",{value:"75DA3CC-F2B5-4CD0-A65E-A3B58BF0DB03"},"75DA3CC-...-DB03",-1),e("option",{value:"75DA3CC-F2B5-4CD0-A65E-A3B58BF0DB04"},"75DA3CC-...-DB04",-1),e("option",{value:"custom"},"è‡ªå®šä¹‰",-1)])],544),[[q,s.UserAppDeviceUuid]]),s.UserAppDeviceUuid==="custom"?A((c(),p("input",{key:0,"onUpdate:modelValue":t[13]||(t[13]=l=>d.value=l),placeholder:"è¾“å…¥è‡ªå®šä¹‰UUID",class:"custom-input"},null,512)),[[G,d.value]]):L("",!0)]),e("div",{class:"actions"},[e("button",{onClick:F,class:"generate-btn"},"å¼€å§‹é…ç½‘"),e("button",{onClick:Y,class:"reset-btn"},"é‡ç½®æ•°æ®"),e("button",{onClick:$,class:"reset-btn"},"ç»‘å®šAPP"),e("button",{onClick:H,class:"reset-btn"},"é€€å‡ºé…ç½‘")]),e("div",null,[t[25]||(t[25]=e("h4",null,"æ—¥å¿—è¾“å‡º:",-1)),e("div",Qe,[(c(!0),p(J,null,j(C.value,(l,M)=>(c(),p("div",{key:M,style:{"margin-bottom":"5px"}},B(l),1))),128))])])])])])])):L("",!0)]),_:1})]))}}),tt=ue(et,[["__scopeId","data-v-50fa89b7"]]),st={class:"page"},ot={class:"controls"},lt=["disabled"],nt=["disabled"],at={key:0},it={key:1},ut={class:"controls"},rt=["disabled"],dt=["disabled"],vt=["disabled"],ct={key:0},ft={key:1},pt={class:"wifi-display"},mt={key:0,class:"wifi-fields"},bt={key:1,class:"wifi-empty"},gt=["disabled"],Ut={key:0,class:"modal-overlay"},yt={class:"controls",style:{display:"flex","flex-direction":"column",gap:"6px"}},Ct={key:0},At=["disabled"],St=["disabled"],Dt={class:"checkbox-group"},Bt={class:"log"},Tt="0000ffe0-0000-1000-8000-00805f9b34fb",Q="YellowSubmarine_",wt=ie({__name:"dataDebug",setup(g){const U=fe(),{isConnected:u,device:s,server:S,isSupported:y}=ce(U),m=v("0000ffe1-0000-1000-8000-00805f9b34fb");v(""),v(!1);const r=v([]),d=v(!1),h=v(!1),_=ve(S,Tt),x=v([]),N=v(null),D=v("æœªæ“ä½œ"),F=v(""),Y=se(()=>D.value.includes("æˆåŠŸ")||D.value.includes("å®Œæˆ")?"success":"");async function H(f){if(!u.value)return;await _.subscribe(f,a=>V(f,a))?(console.log(`âœ… æˆåŠŸè®¢é˜… ${f}`),d.value=!0):console.warn(`âŒ è®¢é˜…å¤±è´¥ ${f}`)}function O(f){u.value&&(_.unsubscribe(f),d.value=!1)}const n=v("string");async function i(){if(!u.value){r.value.unshift("âŒ æœªè¿žæŽ¥ï¼Œæ— æ³•è¯»å–é…ç½‘æ•°æ®"),D.value="âŒ æœªè¿žæŽ¥";return}const f="0000ffe1-0000-1000-8000-00805f9b34fb",o="00002a3d-0000-1000-8000-00805f9b34fb";try{const a=await pe(S.value,o,f);if(!a||a.length===0){r.value.unshift("âŒ è¯»å–åˆ°çš„é…ç½‘æ•°æ®ä¸ºç©º"),D.value="âŒ è¯»å–ä¸ºç©º";return}const b=Array.from(a).map(Z=>Z.toString(16).padStart(2,"0")).join("");r.value.unshift("raw hex: "+b);const I=ne(b,Q);if(F.value=new Date().toISOString(),!I){D.value="âš ï¸ è§£å¯†å¤±è´¥æˆ–ä¸ºç©º",r.value.unshift("âš ï¸ è§£å¯†ä¸ºç©º");return}try{const Z=JSON.parse(I);N.value=Z,r.value.unshift("âœ… è§£å¯†å¹¶è§£æžæˆåŠŸ: "+JSON.stringify(Z))}catch{N.value={raw:I},r.value.unshift("âš ï¸ è§£å¯†æˆåŠŸä½†è§£æžä¸º JSON å¤±è´¥ï¼Œæ˜¾ç¤º raw")}D.value="âœ… è¯»å–æˆåŠŸ";const T={device:s.value?.name||"æœªçŸ¥è®¾å¤‡",name:s.value?.id||"æœªçŸ¥MAC",data:typeof I=="string"&&I.length?I:JSON.stringify(N.value||{}),timestamp:F.value};D.value="ðŸš€ æ­£åœ¨æ£€æµ‹æ•°æ®â€¦";const X=await fetch("https://red.yzluo.top/bledata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!X.ok)throw new Error(X.statusText);const ye=await X.json();D.value="ðŸš€ æ•°æ®æ£€æµ‹å®Œæˆ",r.value.unshift("POST è¿”å›ž: "+JSON.stringify(ye))}catch(a){r.value.unshift("âŒ è¯»å–é…ç½‘æ•°æ®å¤±è´¥: "+(a?.message||a)),D.value="âŒ è¯»å–å¤±è´¥"}}const C=v(!1),$=()=>{C.value=!0},K=f=>{console.log("æŽ¥æ”¶åˆ°çš„é…ç½®æ•°æ®:",f),l(f)},k=()=>{C.value=!1,console.log("å¼¹çª—å·²å…³é—­ï¼Œæœªç”Ÿæˆæ–°æ•°æ®")};oe(u,f=>{f||(C.value=!1,h.value=!1)});const t=()=>{h.value?h.value=!1:h.value=!0};async function l(f){if(!u.value){r.value.unshift("âŒ æœªè¿žæŽ¥ï¼Œæ— æ³•å‘é€é…ç½®æ•°æ®");return}const o="0000ffe1-0000-1000-8000-00805f9b34fb",a="0000ffe1-0000-1000-8000-00805f9b34fb";try{console.log("âž¡ï¸ å‘é€é…ç½‘æ•°æ®:",f);const b=ve(S,o);let I=f;const T=Ie(I,Q);if(!T){r.value.unshift("âŒ åŠ å¯†å¤±è´¥"),await b.destroy();return}I=T,console.log("âž¡ï¸ åŠ å¯†åŽæ•°æ®:",I);try{await b.send(a,I),r.value.unshift("âœ… é…ç½‘æ•°æ®å·²å‘é€")}finally{await b.destroy()}}catch{r.value.unshift("âŒ å‘é€é…ç½®æ•°æ®å¤±è´¥: ")}}const M=v(null),W=v("");function P(f){M.value=f,W.value=Ue(f)}async function re(f){if(!u.value){r.value.unshift("âŒ æœªè¿žæŽ¥ï¼Œæ— æ³•å‘é€");return}if(!M.value||!M.value.length){r.value.unshift("âŒ æ— é€‰ä¸­æ•°æ®");return}try{await _.send(f,M.value),r.value.unshift("âž¡ï¸ å·²å‘é€ ç”Ÿæˆæ•°æ®: "+W.value)}catch(o){r.value.unshift("âŒ å‘é€å¤±è´¥: "+(o?.message||o))}}function V(f,o){const a=Array.from(o).map(T=>T.toString(16).padStart(2,"0")).join("");console.log("æ”¶åˆ°é€šçŸ¥æ¥è‡ª",f,"æ•°æ®(hex):",a);let b="";if(n.value==="hex")b=a,console.log("Hex æ˜¾ç¤ºæ¨¡å¼ï¼Œæ•°æ®:",b);else if(n.value==="decrypt")try{xe(a,Q),console.log("å°è¯•è§£å¯†æ•°æ®(hex):",a);const T=ne(a,Q);if(!T)b="[è§£å¯†å¤±è´¥]",console.warn("è§£å¯†ç»“æžœä¸ºç©º");else{console.log("è§£å¯†ç»“æžœ:",T);try{const X=JSON.parse(T);b=JSON.stringify(X,null,2)}catch{b=T}}}catch(T){console.error("è§£å¯†å¼‚å¸¸:",T),b="[è§£å¯†é”™è¯¯: æœªçŸ¥é”™è¯¯]"}else try{const T=new TextDecoder().decode(o);T.trim()?b=T:b="[ç©ºæ•°æ®]"}catch{b=`[éž UTF - 8 æ•°æ®ï¼Œhex: ${a}]`}const I=new Date().toLocaleTimeString();x.value.unshift({time:I,uuid:f,data:b}),x.value.length>20&&x.value.splice(20)}function z(){r.value=[]}function de(){x.value=[]}return(f,o)=>(c(),p("section",st,[o[16]||(o[16]=e("h1",null,"Web è“ç‰™ Demo",-1)),e("div",ot,[e("button",{onClick:o[0]||(o[0]=(...a)=>w(U).connect&&w(U).connect(...a)),disabled:!w(y)||w(u)},"è¿žæŽ¥",8,lt),e("button",{onClick:o[1]||(o[1]=(...a)=>w(U).disconnect&&w(U).disconnect(...a)),disabled:!w(u)},"æ–­å¼€",8,nt),w(u)?(c(),p("span",at,"âœ… å·²è¿žæŽ¥: "+B(w(s)?.name||"æœªçŸ¥è®¾å¤‡"),1)):(c(),p("span",it,"âŒ æœªè¿žæŽ¥"))]),o[17]||(o[17]=e("h3",null,"è“ç‰™ç‰¹å¾è®¢é˜…æŽ§åˆ¶",-1)),e("div",ut,[e("button",{onClick:o[2]||(o[2]=a=>H(m.value)),disabled:!w(u)||d.value},"è®¢é˜…",8,rt),e("button",{onClick:o[3]||(o[3]=a=>O(m.value)),disabled:!w(u)||!d.value},"å–æ¶ˆè®¢é˜…",8,dt),e("button",{onClick:i,disabled:!w(u)},"èŽ·å–é…ç½‘æ•°æ®",8,vt),d.value?(c(),p("span",ct,"ðŸ“¡ å·²è®¢é˜…")):(c(),p("span",ft,"æœªè®¢é˜…"))]),o[18]||(o[18]=e("h3",null,"é…ç½‘æ•°æ®",-1)),e("div",pt,[e("div",null,[o[9]||(o[9]=E("çŠ¶æ€: ",-1)),e("span",{class:he(Y.value)},B(D.value),3)]),e("div",null,"æ—¶é—´: "+B(F.value),1),N.value?(c(),p("div",mt,[e("div",null,"MAC: "+B(N.value.MAC),1),e("div",null,"HubToken: "+B(N.value.HubToken),1),e("div",null,"HubSn: "+B(N.value.HubSn),1)])):(c(),p("div",bt,"å°šæœªè¯»å–åˆ°é…ç½‘æ•°æ®"))]),e("button",{onClick:t,class:"open-btn",disabled:!w(u)}," å¼€å§‹ç”Ÿæˆæ•°æ®å‘é€ ",8,gt),h.value?(c(),p("div",Ut,[e("div",yt,[le(Ve,{onGenerated:P}),W.value?(c(),p("div",Ct,[o[10]||(o[10]=E(" å·²é€‰æ‹©: ",-1)),e("code",null,B(W.value),1)])):L("",!0),e("button",{onClick:o[4]||(o[4]=a=>re(m.value)),disabled:!w(u)}," å‘é€ç”Ÿæˆæ•°æ® ",8,At)])])):L("",!0),e("button",{onClick:$,disabled:!w(u),class:"open-btn"},"æ‰“å¼€WIFIé…ç½‘é¡µé¢",8,St),le(tt,{visible:C.value,"onUpdate:visible":o[5]||(o[5]=a=>C.value=a),onConfirmed:K,onClosed:k},null,8,["visible"]),e("div",Dt,[e("label",null,[A(e("input",{type:"radio",value:"string","onUpdate:modelValue":o[6]||(o[6]=a=>n.value=a)},null,512),[[ee,n.value]]),o[11]||(o[11]=E(" å­—ç¬¦ä¸²æ˜¾ç¤º",-1))]),e("label",null,[A(e("input",{type:"radio",value:"hex","onUpdate:modelValue":o[7]||(o[7]=a=>n.value=a)},null,512),[[ee,n.value]]),o[12]||(o[12]=E(" Hex æ˜¾ç¤º",-1))]),e("label",null,[A(e("input",{type:"radio",value:"decrypt","onUpdate:modelValue":o[8]||(o[8]=a=>n.value=a)},null,512),[[ee,n.value]]),o[13]||(o[13]=E(" è§£å¯†æ˜¾ç¤º",-1))])]),e("h3",null,[o[14]||(o[14]=E("æŽ¥æ”¶æ•°æ® ",-1)),e("button",{onClick:de},"æ¸…é™¤")]),(c(!0),p(J,null,j(x.value,(a,b)=>(c(),p("div",{key:b},[e("pre",null,B(a.time)+" | "+B(a.uuid)+" | "+B(a.data),1)]))),128)),e("div",Bt,[e("h3",null,[o[15]||(o[15]=E("æ—¥å¿— ",-1)),e("button",{onClick:z},"æ¸…é™¤")]),(c(!0),p(J,null,j(r.value,(a,b)=>(c(),p("div",{key:b},B(a),1))),128))])]))}}),Et=ue(wt,[["__scopeId","data-v-3c69c288"]]);export{Et as default};
